{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{Formik,Form,Field}from'formik';import*as yup from'yup';import{FacebookShareButton,TwitterShareButton,FacebookIcon,TwitterIcon}from'react-share';import Card from'react-bootstrap/Card';import axios from'axios';import'./media.css';import'bootstrap/dist/css/bootstrap.min.css';import AppHeader from'../components/header.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL||'/api';const schema=yup.object().shape({tripName:yup.string().required('Trip name is required'),tags:yup.string(),notes:yup.string(),media:yup.mixed()});const MediaCard=_ref=>{let{media,index}=_ref;const shareUrl=window.location.origin+'/media/'+index;return/*#__PURE__*/_jsx(Card,{style:{width:'18rem'},children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:media.tripName}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tags: \",media.tags]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Notes: \",media.notes]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(FacebookShareButton,{url:shareUrl,children:/*#__PURE__*/_jsx(FacebookIcon,{size:32,round:true})}),/*#__PURE__*/_jsx(TwitterShareButton,{url:shareUrl,children:/*#__PURE__*/_jsx(TwitterIcon,{size:32,round:true})})]})]})});};const Media=()=>{const[mediaEntries,setMediaEntries]=useState([]);const formikRef=useRef();useEffect(()=>{axios.get(\"\".concat(apiUrl,\"/media\")).then(response=>{setMediaEntries(response.data);}).catch(error=>{console.error('Error fetching media:',error);});},[]);const handleSubmit=async(values,_ref2)=>{let{resetForm}=_ref2;const formData=new FormData();if(values.media){for(let i=0;i<values.media.length;i++){formData.append('media',values.media[i]);}}formData.append('tripName',values.tripName);formData.append('tags',values.tags);formData.append('notes',values.notes);try{const response=await axios.post(\"\".concat(apiUrl,\"/media\"),formData,{headers:{'Content-Type':'multipart/form-data'}});setMediaEntries([response.data,...mediaEntries]);resetForm();}catch(error){console.error('Error submitting media:',error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AppHeader,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"media-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"media-text\",children:\"Upload Your Media\"}),/*#__PURE__*/_jsx(\"div\",{className:\"underline\"})]}),/*#__PURE__*/_jsx(Formik,{initialValues:{tripName:'',tags:'',notes:'',media:null},validationSchema:schema,onSubmit:handleSubmit,innerRef:formikRef,children:_ref3=>{let{setFieldValue}=_ref3;return/*#__PURE__*/_jsxs(Form,{id:\"media-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(Field,{name:\"tripName\",type:\"text\",placeholder:\"Enter Trip Name\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(Field,{name:\"tags\",type:\"text\",placeholder:\"Enter tags separated by commas\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(Field,{name:\"notes\",type:\"text\",placeholder:\"Notes\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(\"input\",{id:\"file\",name:\"media\",type:\"file\",multiple:true,onChange:event=>{setFieldValue('media',event.currentTarget.files);},className:\"form-control\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"media-submit-container\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn media-btn-primary submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn media-btn-secondary submit\",onClick:()=>{var _formikRef$current;return(_formikRef$current=formikRef.current)===null||_formikRef$current===void 0?void 0:_formikRef$current.resetForm();},children:\"Cancel\"})]})]});}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"media-display\",children:mediaEntries.map((entry,index)=>/*#__PURE__*/_jsx(MediaCard,{media:entry,index:index},index))})]});};export default Media;","map":{"version":3,"names":["React","useState","useEffect","useRef","Formik","Form","Field","yup","FacebookShareButton","TwitterShareButton","FacebookIcon","TwitterIcon","Card","axios","AppHeader","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","apiUrl","process","env","REACT_APP_API_URL","schema","object","shape","tripName","string","required","tags","notes","media","mixed","MediaCard","_ref","index","shareUrl","window","location","origin","style","width","children","Body","Title","url","size","round","Media","mediaEntries","setMediaEntries","formikRef","get","concat","then","response","data","catch","error","console","handleSubmit","values","_ref2","resetForm","formData","FormData","i","length","append","post","headers","className","initialValues","validationSchema","onSubmit","innerRef","_ref3","setFieldValue","id","name","type","placeholder","multiple","onChange","event","currentTarget","files","onClick","_formikRef$current","current","map","entry"],"sources":["/Users/nicolemerriman/Desktop/Capstone/Final Project/wanderlogixs_2.0/frontend/src/components/media.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Formik, Form, Field } from 'formik';\nimport * as yup from 'yup';\nimport { FacebookShareButton, TwitterShareButton, FacebookIcon, TwitterIcon } from 'react-share';\nimport Card from 'react-bootstrap/Card';\nimport axios from 'axios';\nimport './media.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport AppHeader from '../components/header.js'; \n\nconst apiUrl = process.env.REACT_APP_API_URL || '/api';\n\nconst schema = yup.object().shape({\n    tripName: yup.string().required('Trip name is required'),\n    tags: yup.string(),\n    notes: yup.string(),\n    media: yup.mixed(), \n});\n\nconst MediaCard = ({ media, index }) => {\n    const shareUrl = window.location.origin + '/media/' + index;\n\n    return (\n        <Card style={{ width: '18rem' }}>\n            <Card.Body>\n                <Card.Title>{media.tripName}</Card.Title>\n                <p>Tags: {media.tags}</p>\n                <p>Notes: {media.notes}</p>\n                <div>\n                    <FacebookShareButton url={shareUrl}>\n                        <FacebookIcon size={32} round />\n                    </FacebookShareButton>\n                    <TwitterShareButton url={shareUrl}>\n                        <TwitterIcon size={32} round />\n                    </TwitterShareButton>\n                </div>\n            </Card.Body>\n        </Card>\n    );\n};\n\nconst Media = () => {\n    const [mediaEntries, setMediaEntries] = useState([]);\n    const formikRef = useRef();\n\n    useEffect(() => {\n        axios.get(`${apiUrl}/media`)\n            .then(response => {\n                setMediaEntries(response.data);\n            })\n            .catch(error => {\n                console.error('Error fetching media:', error);\n            });\n    }, []);\n\n    const handleSubmit = async (values, { resetForm }) => {\n        const formData = new FormData();\n        if (values.media) {\n            for (let i = 0; i < values.media.length; i++) {\n                formData.append('media', values.media[i]);\n            }\n        }\n        formData.append('tripName', values.tripName);\n        formData.append('tags', values.tags);\n        formData.append('notes', values.notes);\n\n        try {\n            const response = await axios.post(`${apiUrl}/media`, formData, {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }\n            });\n\n            setMediaEntries([response.data, ...mediaEntries]);\n            resetForm();\n        } catch (error) {\n            console.error('Error submitting media:', error);\n        }\n    };\n\n    return (\n        <>\n            <AppHeader />\n            <div className=\"media-form-container\">\n              <div className=\"media-header\">\n                <div className=\"media-text\">Upload Your Media</div>\n                <div className=\"underline\"></div>\n              </div>\n              <Formik\n                initialValues={{ tripName: '', tags: '', notes: '', media: null }}\n                validationSchema={schema}\n                onSubmit={handleSubmit}\n                innerRef={formikRef}\n              >\n                {({ setFieldValue }) => (\n                  <Form id=\"media-form\">\n                    <div className=\"inputs\">\n                      {/* Input fields */}\n                      <div className=\"input\">\n                        <Field name=\"tripName\" type=\"text\" placeholder=\"Enter Trip Name\" className=\"form-control\" />\n                      </div>\n                      <div className=\"input\">\n                        <Field name=\"tags\" type=\"text\" placeholder=\"Enter tags separated by commas\" className=\"form-control\" />\n                      </div>\n                      <div className=\"input\">\n                        <Field name=\"notes\" type=\"text\" placeholder=\"Notes\" className=\"form-control\" />\n                      </div>\n                      <div className=\"input\">\n                        <input id=\"file\" name=\"media\" type=\"file\" multiple onChange={(event) => {\n                            setFieldValue('media', event.currentTarget.files);\n                        }} className=\"form-control\" />\n                      </div>\n                    </div>\n                    <div className=\"media-submit-container\">\n                    <button type=\"submit\" className=\"btn media-btn-primary submit\">Submit</button>\n                    <button type=\"submit\" className=\"btn media-btn-secondary submit\" onClick={() =>  formikRef.current?.resetForm()}>\n                        Cancel\n                      </button>\n                    </div>\n                  </Form>\n                )}\n              </Formik>\n            </div>\n            <div className=\"media-display\">\n              {mediaEntries.map((entry, index) => (\n                  <MediaCard key={index} media={entry} index={index} />\n              ))}\n            </div>\n        </>\n    );\n};\n\nexport default Media;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}