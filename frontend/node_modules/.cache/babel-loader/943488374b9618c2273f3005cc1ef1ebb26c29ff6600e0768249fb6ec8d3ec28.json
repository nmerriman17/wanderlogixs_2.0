{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Formik,Form,Field}from'formik';import*as yup from'yup';import'./expenses.css';import'bootstrap/dist/css/bootstrap.min.css';import AppHeader from'../components/header.js';import Card from'react-bootstrap/Card';import axios from'axios';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";const apiUrl=process.env.REACT_APP_API_URL||'/api';const schema=yup.object().shape({date:yup.date().required('Date is required'),category:yup.string().required('Category is required'),amount:yup.number().required('Amount is required').positive().typeError('Amount must be a number'),description:yup.string()});const ExpenseCard=_ref=>{let{expense}=_ref;return/*#__PURE__*/_jsx(Card,{style:{width:'18rem'},children:/*#__PURE__*/_jsxs(Card.Body,{children:[/*#__PURE__*/_jsx(Card.Title,{children:expense.category}),/*#__PURE__*/_jsx(Card.Subtitle,{className:\"mb-2 text-muted\",children:expense.date}),/*#__PURE__*/_jsxs(Card.Text,{children:[expense.description,/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"b\",{children:\"Amount:\"}),\" $\",expense.amount]})]})});};const AppExpenses=()=>{const[expenses,setExpenses]=useState([]);const navigate=useNavigate();useEffect(()=>{const token=sessionStorage.getItem('token');if(!token){navigate('/login');return;}axios.get(\"\".concat(apiUrl,\"/expenses\"),{headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>setExpenses(response.data)).catch(error=>{console.error('Error fetching expenses:',error);if(error.response&&error.response.status===401){navigate('/login');}});},[navigate]);const handleSubmit=async(values,_ref2)=>{let{resetForm}=_ref2;const token=sessionStorage.getItem('token');if(!token){navigate('/login');return;}const expenseData={...values};axios.post(\"\".concat(apiUrl,\"/expenses\"),expenseData,{headers:{Authorization:\"Bearer \".concat(token)}}).then(response=>{setExpenses([response.data,...expenses]);resetForm();}).catch(error=>console.error('Error submitting expense:',error));};const handleCancel=()=>{setFormState('cancel');document.getElementById('expense-form').reset();};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(AppHeader,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"expense-form-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"expense-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"expense-text\",children:\"Add Your Expenses\"}),/*#__PURE__*/_jsx(\"div\",{className:\"underline\"})]}),/*#__PURE__*/_jsx(Formik,{initialValues:{date:'',category:'',amount:'',description:''},validationSchema:schema,onSubmit:handleSubmit,children:_ref3=>{let{setFieldValue}=_ref3;return/*#__PURE__*/_jsxs(Form,{id:\"expense-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputs\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(Field,{name:\"date\",type:\"date\",className:\"form-control\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsxs(Field,{as:\"select\",name:\"category\",className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"food\",children:\"Food\"}),/*#__PURE__*/_jsx(\"option\",{value:\"transportation\",children:\"Transportation\"}),/*#__PURE__*/_jsx(\"option\",{value:\"entertainment\",children:\"Entertainment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"accommodations\",children:\"Accommodations\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(Field,{name:\"amount\",type:\"text\",placeholder:\"Amount\",className:\"form-control\",step:\"0.01\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"input\",children:/*#__PURE__*/_jsx(Field,{name:\"description\",type:\"text\",placeholder:\"Description\",className:\"form-control\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"expense-submit-container\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn expense-btn-primary submit\",disabled:formState!=='submit',children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn expense-btn-secondary submit\",onClick:handleCancel,children:\"Cancel\"})]})]});}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"expense-display\",children:expenses.map((expense,index)=>/*#__PURE__*/_jsx(ExpenseCard,{expense:expense},index))})]});};export default AppExpenses;","map":{"version":3,"names":["React","useState","useEffect","Formik","Form","Field","yup","AppHeader","Card","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","apiUrl","process","env","REACT_APP_API_URL","schema","object","shape","date","required","category","string","amount","number","positive","typeError","description","ExpenseCard","_ref","expense","style","width","children","Body","Title","Subtitle","className","Text","AppExpenses","expenses","setExpenses","navigate","token","sessionStorage","getItem","get","concat","headers","Authorization","then","response","data","catch","error","console","status","handleSubmit","values","_ref2","resetForm","expenseData","post","handleCancel","setFormState","document","getElementById","reset","initialValues","validationSchema","onSubmit","_ref3","setFieldValue","id","name","type","as","value","placeholder","step","disabled","formState","onClick","map","index"],"sources":["/Users/nicolemerriman/Desktop/Capstone/Final Project/WanderLogixs_App/WanderLogixs_App/frontend/src/components/expenses.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Formik, Form, Field } from 'formik';\nimport * as yup from 'yup';\nimport './expenses.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport AppHeader from '../components/header.js'; \nimport Card from 'react-bootstrap/Card';\nimport axios from 'axios';\nimport { useNavigate } from 'react-router-dom';\n\nconst apiUrl = process.env.REACT_APP_API_URL || '/api';\n\nconst schema = yup.object().shape({\n  date: yup.date().required('Date is required'),\n  category: yup.string().required('Category is required'),\n  amount: yup\n    .number()\n    .required('Amount is required')\n    .positive()\n    .typeError('Amount must be a number'),\n  description: yup.string(),\n});\n\nconst ExpenseCard = ({ expense }) => {\n  return (\n    <Card style={{ width: '18rem' }}>\n      <Card.Body>\n        <Card.Title>{expense.category}</Card.Title>\n        <Card.Subtitle className=\"mb-2 text-muted\">{expense.date}</Card.Subtitle>\n        <Card.Text>\n          {expense.description}\n          <br />\n          <b>Amount:</b> ${expense.amount}\n        </Card.Text>\n      </Card.Body>\n    </Card>\n  );\n}\n\nconst AppExpenses = () => {\n  const [expenses, setExpenses] = useState([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const token = sessionStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n\n    axios.get(`${apiUrl}/expenses`, { headers: { Authorization: `Bearer ${token}` } })\n         .then(response => setExpenses(response.data))\n         .catch(error => {\n           console.error('Error fetching expenses:', error);\n           if (error.response && error.response.status === 401) {\n             navigate('/login');\n           }\n         });\n  }, [navigate]);\n\n  const handleSubmit = async (values, { resetForm }) => {\n    const token = sessionStorage.getItem('token');\n    if (!token) {\n      navigate('/login');\n      return;\n    }\n\n    const expenseData = { ...values };\n    axios.post(`${apiUrl}/expenses`, expenseData, { headers: { Authorization: `Bearer ${token}` } })\n         .then(response => {\n           setExpenses([response.data, ...expenses]);\n           resetForm();\n         })\n         .catch(error => console.error('Error submitting expense:', error));\n  };\n\n\n  const handleCancel = () => {\n    setFormState('cancel');\n    document.getElementById('expense-form').reset();\n  };\n\n  return (\n    <>\n      <AppHeader />\n      <div className=\"expense-form-container\">\n        <div className=\"expense-header\">\n          <div className=\"expense-text\">Add Your Expenses</div>\n          <div className=\"underline\"></div>\n        </div>\n        <Formik\n          initialValues={{\n            date: '',\n            category: '',\n            amount: '',\n            description: '',\n          }}\n          validationSchema={schema}\n          onSubmit={handleSubmit}\n        >\n          {({ setFieldValue }) => (\n            <Form id=\"expense-form\">\n              <div className=\"inputs\">\n                <div className=\"input\">\n                  <Field name=\"date\" type=\"date\" className=\"form-control\" />\n                </div>\n                <div className=\"input\">\n                  <Field as=\"select\" name=\"category\" className=\"form-control\">\n                    <option value=\"\">Select Category</option>\n                    <option value=\"food\">Food</option>\n                    <option value=\"transportation\">Transportation</option>\n                    <option value=\"entertainment\">Entertainment</option>\n                    <option value=\"accommodations\">Accommodations</option>\n                  </Field>\n                </div>\n                <div className=\"input\">\n                  <Field name=\"amount\" type=\"text\" placeholder=\"Amount\" className=\"form-control\" step=\"0.01\" />\n                </div>\n                <div className=\"input\">\n                  <Field name=\"description\" type=\"text\" placeholder=\"Description\" className=\"form-control\" />\n                </div>\n              </div>\n              <div className=\"expense-submit-container\">\n                <button type=\"submit\" className=\"btn expense-btn-primary submit\" disabled={formState !== 'submit'}>\n                  Submit\n                </button>\n                \n                <button type=\"button\" className=\"btn expense-btn-secondary submit\" onClick={handleCancel}>\n                  Cancel\n                </button>\n              </div>\n            </Form>\n          )}\n        </Formik>\n      </div>\n      <div className=\"expense-display\">\n        {expenses.map((expense, index) => (\n          <ExpenseCard key={index} expense={expense} />\n        ))}\n      </div>\n    </>\n  );\n};\n\nexport default AppExpenses;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}